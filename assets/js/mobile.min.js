function collapsableMenu(){subMenu=$("ul li ul"),parentMenu=$("ul li ul").parent(),subMenu.css("display","none"),parentMenu.css("cursor","pointer"),parentMenu.each(function(){parentMenuHref=$(this).children("a").attr("href"),parentMenuLink=$(this).children("a").attr("link",parentMenuHref),$(this).children("a").removeAttr("href")}),parentMenu.click(function(){menuChild=$(this).children("ul"),"none"==menuChild.css("display")?menuChild.slideDown(500,closeOthers()):(linkTo=$(this).children("a").attr("link"),trace(linkTo),window.location=linkTo)}),closeOthers=function(){subMenu.each(function(){$(this).slideUp(500)})}}function marqueeTicker(){var e=".active-notification",t=$("#notification-bar li").length;1==t&&$("#notification-bar li").addClass("active-notification");var i=4e3,n=2e3,o=35,a=20,r=$("#notification-bar .first"),s=window.innerWidth,c=$(e).children("span").width(),d=$(e).height(),l=c/s,u=o;c>s&&(u=-1*(c-s+a)+"px"),$(e).children("span").css("right")==u&&u!=o&&$(e).children("span").animate({right:o},i/10),$(e).children("span").animate({right:u},i*l,function(){$(e).hasClass("last")?($(e).removeClass("active-notification"),r.addClass("active-notification"),r.children("span").css("right",o+"px"),$("#notification-bar").animate({top:0},n/2.5,function(){marqueeTicker()})):($(e).removeClass("active-notification").next("li").addClass("active-notification"),$(e).children("span").css("right",o+"px"),$("#notification-bar").animate({top:"-="+d+"px"},n,function(){marqueeTicker()}))})}function collapsibleWeather(e,t){hiddenData=$(e),parentRow=$(e).parent(t),hiddenData.css("display","none"),parentRow.css("cursor","pointer"),parentRow.click(function(){menuChild=$(this).children(".hidden-data"),"none"==menuChild.css("display")?(menuChild.slideDown(500,closeOtherRows()),$(this).addClass("shown"),$(this).removeClass("hidden")):(menuChild.slideUp(500,closeOtherRows()),$(this).addClass("hidden"),$(this).removeClass("shown"))}),closeOtherRows=function(){hiddenData.each(function(){$(this).parent(t).addClass("hidden"),$(this).parent(t).removeClass("shown"),$(this).slideUp(500)})}}function showGpsLoader(e){e?$("#autocomplete-ajax").css("background-image","url(http://m.st.wthr.ws/assets/images/mobile-theme/loading_transparent/autocomplete.gif)").css("background-position","left").css("background-repeat","no-repeat").css("opacity","0.6"):$("#autocomplete-ajax").css("background-image","none")}function handleLocation(e){getGeoLocation(function(t){setCookie(t.default_cookie?{prefix:globalSettings.currentDomain,adminID:globalSettings.defaultCookieValues.adminID,adminTitle:globalSettings.defaultCookieValues.adminTitle,locationID:globalSettings.defaultCookieValues.locationID,locationTitle:globalSettings.defaultCookieValues.locationTitle}:{prefix:globalSettings.currentDomain,adminID:t.location_id.aid,adminTitle:t.location_id.aname_ar,locationID:t.location_id.weather_id,locationTitle:t.location_id.lname_ar}),e(t)})}function handleLocationForRegionalOnly(e){getGeoLocation(function(t){e(t)})}function getGeoLocation(e){if(navigator.geolocation){var t="";gpsTimeOut=setTimeout(function(){(""==t||null==t)&&(_gaq.push(["_trackEvent","mobileGPS","TimeOut"]),alert("لم نتمكن من تحديد موقعك، يرجى البحث عن موقعك"),e({done:!1,location_id:null,error:"ajax error",default_cookie:!0}))},1e4),navigator.geolocation.getCurrentPosition(function(t){var i=t.coords.latitude,n=t.coords.longitude,o="/ajax/geos/latLngOnly",a=o+"/"+i+"/"+n+"/"+globalSettings.currentDomain+"/1";$.ajax({url:a}).done(function(t){clearTimeout(gpsTimeOut),0==t.response.length?(_gaq.push(["_trackEvent","mobileGPS","notFound",i+","+n]),e({done:!0,location_id:null,error:null,default_cookie:!0})):(_gaq.push(["_trackEvent","mobileGPS","found",t.response.docs[0].lname_ar,i+","+n]),e({done:!0,location_id:t.response.docs[0],error:null,default_cookie:!1}))}).fail(function(){_gaq.push(["_trackEvent","mobileGPS","GeosFail"]),clearTimeout(gpsTimeOut),e({done:!1,location_id:null,error:"ajax error",default_cookie:!0})})},function(t){_gaq.push(["_trackEvent","mobileGPS","Error"]),clearTimeout(gpsTimeOut),e({done:!1,location_id:null,error:t,default_cookie:!0})})}else _gaq.push(["_trackEvent","mobileGPS","NotSupported"]),clearTimeout(gpsTimeOut),e({done:!1,location_id:null,error:null,default_cookie:!0})}function setCookie(e){var t={domainPrefix:"m_"+e.prefix+"_",cookiePeriod:365,cookiePath:"/",cookieRaw:!0};$.cookie(t.domainPrefix+"settings_administrative",e.adminID,{expires:t.cookiePeriod,path:t.cookiePath,domain:t.cookieDomain,raw:t.cookieRaw}),$.cookie(t.domainPrefix+"settings_administrative_title",e.adminTitle,{expires:t.cookiePeriod,path:t.cookiePath,domain:t.cookieDomain,raw:t.cookieRaw}),$.cookie(t.domainPrefix+"settings_location",e.locationID,{expires:t.cookiePeriod,path:t.cookiePath,domain:t.cookieDomain,raw:t.cookieRaw}),$.cookie(t.domainPrefix+"settings_location_title",e.locationTitle,{expires:t.cookiePeriod,path:t.cookiePath,domain:t.cookieDomain,raw:t.cookieRaw})}function getCookie(e){var t=getCookieKeys(e.key);return $.cookie("m_"+e.prefix+"_"+t)}function getCookieKeys(e){var t="";switch(e){case"aid":t="settings_administrative";break;case"at":t="settings_administrative_title";break;case"lid":t="settings_location";break;case"lt":t="settings_location_title"}return t}function fill_cities(){var e=globalSettings.currentDomain,t=globalSettings.currentCountryID;$.getJSON("/ajax/geos/getAdministrative/"+t+"/"+e,function(i){html="",$("#country-select").find("option").remove(),$("#city-select").html("");var n=parseInt(t);if(-1!=n){var o=i[Object.keys(i)[0]].city,a=getCookie({key:"aid",prefix:e});$.each(o,function(e,t){html+=t.id==a?'<option value="'+t.id+'" selected="selected" >'+t.title+"</option>":'<option value="'+t.id+'" >'+t.title+"</option>"}),$("#country-select").append(html),change_region()}})}function change_region(){var e=globalSettings.currentDomain,t=globalSettings.currentCountryID;$.getJSON("/ajax/geos/getLocations/"+t+"/"+e,function(t){html="",$("#city-select").find("option").remove();var i=$("#country-select").val(),n=parseInt(i);if(-1!==n){myRegions=t[n].regions,$.each(myRegions,function(e,t){html+='<option value="'+t.id+'">'+t.title+"</option>"}),$("#city-select").append(html);var o=getCookie({prefix:e,key:"aid"}),a=getCookie({prefix:e,key:"lid"});null!==a&&i==o?$("#city-select").val(a).attr("selected",!0):$("#city-select option:first").attr("selected",!0)}})}function initzAutoComplete(e){$("#autocomplete-ajax").autocomplete({paramName:"",params:{cid:globalSettings.currentCountryID},serviceUrl:"/ajax/geos/autoComplete/",dataType:"json",transformResult:function(e){return{suggestions:$.map(e.response.docs,function(e){return{value:e.lname_ar,ox:{region_id:e.weather_id,city_id:e.aid,city_name:e.aname_ar}}})}},onSelect:function(t){setCookie({prefix:globalSettings.currentDomain,adminID:t.ox.city_id,adminTitle:t.ox.city_name,locationID:t.ox.region_id,locationTitle:t.value}),e()},onHint:function(e){$("#autocomplete-ajax-x").html(e)},onInvalidateSelection:function(){}}),$("#autocomplete-ajax").focus(function(){$(this).val("")}).blur(function(){$(this).val(getCookie({key:"lt",prefix:globalSettings.currentDomain}))})}function loadInnerPageWidget(){var e=getCookie({prefix:globalSettings.currentDomain,key:"lid"});$("#inner-page-weather-widget").hide(),$.get("/weather/innerPageWeatherWidget/"+e,function(e){$("#inner-page-weather-widget").html(e)}).done(function(){var e=getCookie({prefix:globalSettings.currentDomain,key:"lt"});$(".dayname").html(e),$("#inner-page-weather-widget").fadeIn(750)})}function resizeLB(){var e=window.innerWidth/LBOriginalWidth<1?window.innerWidth/LBOriginalWidth:1,t=e*LBOriginalHeight;$(".lb-adv").css("-webkit-transform","scale("+e+")").css("-moz-transform","scale("+e+")").css("-o-transform","scale("+e+")").parent(".lb-container").css("height",t),$("body").css("padding-top",44+t+10),$("#notification-bar-container").css("top",104+$(".lb-container").height())}var globalSettings={currentDomain:"none",currentCountryID:-1,defaultCookieValues:{locationID:"",locationTitle:"",adminID:"",adminTitle:""},currentUrl:$(location).attr("href"),debug:!1,font:{min:"14px",max:"40px"}};trace=function(e){globalSettings.debug&&(console.log("<< Start trace >> "),console.log("Message: "),console.log(e),console.log("<< End trace >>"))},clickToScroll=function(e){$(e).click(function(){var t=$(e).position().top;$("htm , body").animate({scrollTop:t},800),console.log("whereToScroll ? "+t)})},backToTop=function(e){$(e).click(function(){var e=0;$("htm , body").animate({scrollTop:e},290)})},increaseFontSize=function(e){$(e).css("font-size")<globalSettings.font.max&&($(e).css("font-size","+=2px"),$.cookie("aw_font_size",$(e).css("font-size")))},decreaseFontSize=function(e){$(e).css("font-size")>globalSettings.font.min&&($(e).css("font-size","-=2px"),$.cookie("aw_font_size",$(e).css("font-size")))},setFontSize=function(e){$(e).css("font-size",$.cookie("aw_font_size"))};var supportsOrientationChange="onorientationchange"in window,orientationEvent=supportsOrientationChange?"orientationchange":"resize",currentOrientation=window.orientation;window.addEventListener(orientationEvent,function(){window.orientation!=currentOrientation&&location.reload()},!1),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function i(e){return s.raw?e:decodeURIComponent(e)}function n(e){return t(s.json?JSON.stringify(e):String(e))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(r," ")),s.json?JSON.parse(e):e}catch(t){}}function a(t,i){var n=s.raw?t:o(t);return e.isFunction(i)?i(n):n}var r=/\+/g,s=e.cookie=function(o,r,c){if(void 0!==r&&!e.isFunction(r)){if(c=e.extend({},s.defaults,c),"number"==typeof c.expires){var d=c.expires,l=c.expires=new Date;l.setDate(l.getDate()+d)}return document.cookie=[t(o),"=",n(r),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var u=o?void 0:{},h=document.cookie?document.cookie.split("; "):[],p=0,g=h.length;g>p;p++){var f=h[p].split("="),m=i(f.shift()),$=f.join("=");if(o&&o===m){u=a($,r);break}o||void 0===($=a($))||(u[m]=$)}return u};s.defaults={},e.removeCookie=function(t,i){return void 0===e.cookie(t)?!1:(e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t))}}),function(e){var t=!1,i=!1,n={isUrl:function(e){var t=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return t.test(e)?!0:!1},loadContent:function(e,t){e.html(t)},addPrefix:function(e){var t=e.attr("id"),i=e.attr("class");"string"==typeof t&&""!==t&&e.attr("id",t.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof i&&""!==i&&"sidr-inner"!==i&&e.attr("class",i.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),e.removeAttr("style")},execute:function(n,a,r){"function"==typeof a?(r=a,a="sidr"):a||(a="sidr");var s,c,d,l=e("#"+a),u=e(l.data("body")),h=e("html"),p=l.outerWidth(!0),g=l.data("speed"),f=l.data("side");if("open"===n||"toogle"===n&&!l.is(":visible")){if(l.is(":visible")||t)return;if(i!==!1)return void o.close(i,function(){o.open(a)});t=!0,"left"===f?(s={left:p+"px"},c={left:"0px"}):(s={right:p+"px"},c={right:"0px"}),d=h.scrollTop(),h.css("overflow-x","hidden").scrollTop(d),u.css({width:u.width(),position:"absolute"}).addClass("sidr-shown").animate(s,g),$("#sider-overlay").css("display","block"),l.css("display","block").animate(c,g,function(){t=!1,i=a,"function"==typeof r&&r(a)})}else{if(!l.is(":visible")||t)return;t=!0,"left"===f?(s={left:0},c={left:"-"+p+"px"}):(s={right:0},c={right:"-"+p+"px"}),d=h.scrollTop(),h.removeAttr("style").scrollTop(d),u.animate(s,g).removeClass("sidr-shown"),$("#sider-overlay").css("display","none"),l.animate(c,g,function(){l.removeAttr("style"),u.removeAttr("style"),e("html").removeAttr("style"),t=!1,i=!1,"function"==typeof r&&r(a)})}}},o={open:function(e,t){n.execute("open",e,t)},close:function(e,t){n.execute("close",e,t)},toogle:function(e,t){n.execute("toogle",e,t)}};e.sidr=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof t&&"string"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.sidr"):o.toogle.apply(this,arguments)},e.fn.sidr=function(t){var i=e.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body"},t),a=i.name,r=e("#"+a);if(0===r.length&&(r=e("<div />").attr("id",a).appendTo(e("body"))),r.addClass("sidr").addClass(i.side).data({speed:i.speed,side:i.side,body:i.body}),"function"==typeof i.source){var s=i.source(a);n.loadContent(r,s)}else if("string"==typeof i.source&&n.isUrl(i.source))e.get(i.source,function(e){n.loadContent(r,e)});else if("string"==typeof i.source){var c="",d=i.source.split(",");if(e.each(d,function(t,i){c+='<div class="sidr-inner">'+e(i).html()+"</div>"}),i.renaming){var l=e("<div />").html(c);l.find("*").each(function(t,i){var o=e(i);n.addPrefix(o)}),c=l.html()}n.loadContent(r,c)}else null!==i.source&&e.error("Invalid Sidr Source");return this.each(function(){var t=e(this),i=t.data("sidr");i||(t.data("sidr",a),t.click(function(e){e.preventDefault(),o.toogle(a)}))})}}(jQuery),function(e){function t(){a=!1;for(var t=0;t<n.length;t++){var o=e(n[t]).filter(function(){return e(this).is(":appeared")});if(o.trigger("appear",[o]),i){var r=i.not(o);r.trigger("disappear",[r])}i=o}}var i,n=[],o=!1,a=!1,r={interval:250,force_process:!1},s=e(window);e.expr[":"].appeared=function(t){var i=e(t);if(!i.is(":visible"))return!1;var n=s.scrollLeft(),o=s.scrollTop(),a=i.offset(),r=a.left,c=a.top;return c+i.height()>=o&&c-(i.data("appear-top-offset")||0)<=o+s.height()&&r+i.width()>=n&&r-(i.data("appear-left-offset")||0)<=n+s.width()?!0:!1},e.fn.extend({appear:function(i){var s=e.extend({},r,i||{}),c=this.selector||this;if(!o){var d=function(){a||(a=!0,setTimeout(t,s.interval))};e(window).scroll(d).resize(d),o=!0}return s.force_process&&setTimeout(t,s.interval),n.push(c),e(c)}}),e.extend({force_appear:function(){return o?(t(),!0):!1}})}(jQuery);var gpsTimeOut;resizeGradientArea=function(){var e={minGradientHeight:300,GradientAreaHeight:300,upperBarHeight:44,bottomBarHeight:40,secondBarHeight:50,advBarHeight:62,GradientAreaWidth:window.innerWidth};e.GradientAreaHeight=window.innerHeight<=e.minGradientHeight+e.upperBarHeight+e.bottomBarHeight+e.secondBarHeight+e.advBarHeight?e.minGradientHeight:window.innerHeight-e.upperBarHeight-e.bottomBarHeight-e.secondBarHeight-e.advBarHeight,$(".gradient-area").height(e.GradientAreaHeight+40),$(".10percentHeight").css("height",.1*e.GradientAreaHeight+"px"),$(".10percentHeight").css("line-height",.1*e.GradientAreaHeight+"px"),$(".10percentHeight").css("font-size",.1*e.GradientAreaHeight/2+"px"),$(".10percentHeightWpadding").css("height",.06*e.GradientAreaHeight+"px"),$(".10percentHeightWpadding").css("width",.06*e.GradientAreaHeight+"px"),$(".10percentHeightWpadding").css("padding",.02*e.GradientAreaHeight+"px"),$(".8percentHeightWpadding").css("height",.06*e.GradientAreaHeight+"px"),$(".8percentHeightWpadding").css("width",.06*e.GradientAreaHeight+"px"),$(".8percentHeightWpadding").css("padding",.01*e.GradientAreaHeight+"px"),$(".32percentHeight").css("height",.32*e.GradientAreaHeight+"px"),$(".32percentHeight").css("line-height",.32*e.GradientAreaHeight+"px"),$(".8percentHeight").css("height",.08*e.GradientAreaHeight+"px"),$(".8percentHeight").css("line-height",.08*e.GradientAreaHeight+"px"),$(".30percentWidth").css("width",.29*e.GradientAreaWidth+"px"),$(".17percentWidth").css("width",.15*e.GradientAreaWidth+"px"),$(".41percentWidth").css("width",.4*e.GradientAreaWidth+"px"),$(".10percentWidth").css("width",.1*e.GradientAreaWidth+"px"),$(".16percentWidth").css("width",.14*e.GradientAreaWidth+"px"),$(".96container").css("width",.96*e.GradientAreaWidth+"px"),$(".full-width-button-container").css("width",.96*e.GradientAreaWidth+"px"),$(".increasableText iframe").each(function(){$(this).attr("src").match(/youtube/)&&$(this).addClass("youtubeVideo")}),$(".youtubeVideo").css("width","100%"),$(".youtubeVideo").css("height",.66*e.GradientAreaWidth+"px"),$(".article-status-row").css("width",.96*e.GradientAreaWidth+"px"),$(".newsletter-container").css("width",.96*e.GradientAreaWidth+"px"),$(".fb-comments").attr("data-width",.96*e.GradientAreaWidth),$(".fb-comments").css("margin-right",.015*e.GradientAreaWidth+"px"),$(".social-box").css("width",.96*e.GradientAreaWidth+"px"),$(".node-title-container h2").css("margin-bottom",e.GradientAreaWidth*(83/339)/5.5+"px"),$(".node-title-container h2").css("margin-top",e.GradientAreaWidth*(83/339)/16+"px"),$(".node-title-container h2").css("font-size",e.GradientAreaWidth*(83/339)/5+"px"),$(".node-title-container h2").css("line-height",e.GradientAreaWidth*(83/339)/4+"px"),$(".node-date-container").css("margin-top",e.GradientAreaWidth*(83/339)/-10+"px"),$(".node-date-container h2").css("font-size",e.GradientAreaWidth*(83/339)/6+"px"),$(".node-date-container h2").css("line-height",e.GradientAreaWidth*(83/339)/4+"px"),$(".node-date-container h2").css("margin-bottom",e.GradientAreaWidth*(83/339)/12+"px"),$(".font-size-buttons").css("margin-top",e.GradientAreaWidth*(83/339)/-10+"px"),$(".font-size-buttons").css("height",$(".node-date-container").height()),$("#decreaseFontSize , #increaseFontSize").css("margin-top",e.GradientAreaWidth*(83/339)/10+"px"),$("#decreaseFontSize img, #increaseFontSize img").css("width",$("#decreaseFontSize").height()),percentage=e.GradientAreaWidth/320,$("h2").css("font-size",95*percentage+"%"),$(".country-autocomplete").css("width",window.innerWidth-65+"px"),$(".autocomplete").css("width",window.innerWidth-65-70-3+"px")},showBox=function(e){trace("bottom = "+$(e).css("bottom")),$(e).css("bottom")<"0px"?($(e).css("display","block"),$(e).animate({bottom:"0"})):hideBox(e)},hideBox=function(e){trace("bottom = "+$(e).css("bottom")),$(e).css("bottom")>="0px"&&$(e).animate({bottom:"-220px"},500,function(){$(e).css("display","none")})},$(window).resize(function(){resizeGradientArea(),resizeLB()}),$(document).ready(function(){$("#simple-menu , #sidr-logo , #sider-overlay").sidr(),resizeLB(),collapsableMenu(),$(".flag").change(function(){currentHref=window.location.origin,newHref=currentHref.replace(window.location.origin,"http://m."+$(".flag option:selected").attr("prefix")+".arabiaweather.com"),window.location.href=newHref}),backToTop("#back-to-top"),$("#select-area-close , #select-area-close-btn , .weather-box , #overlay-autocomplete").click(function(){$("#overlay-autocomplete , .select-area-box").fadeOut(400)}),$("#select-your-area").click(function(){var e=getCookie({prefix:globalSettings.currentDomain,key:"aid"});$("#country-select").val(e).attr("selected",!0).trigger("change"),$("#overlay-autocomplete , .select-area-box").fadeIn(400)}),$("#country-select").change(function(){change_region()}),resizeGradientArea(),$("#increaseFontSize").click(function(){increaseFontSize(".increasableText p")}),$("#decreaseFontSize").click(function(){decreaseFontSize(".increasableText p")}),setFontSize(".increasableText p"),$("#seach-keyword,#search-page-input").keypress(function(e){if(13==e.which){var t=location.origin+"/q/"+$(this).val();return location.href=t,!1}})}),$(function(){$(document.body).on("appear",".card",function(){$(this).addClass("appeared")}),$(".card").appear({force_process:!0})});var LBOriginalWidth=728,LBOriginalHeight=90;resizeLB();